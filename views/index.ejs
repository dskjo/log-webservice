<% layout('boilerplate') -%>
<h1><%= title %></h1>
<div id="googleMap" style="width:1000px;height:1000px;"></div>

<script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcpUa5_Mt04TgjXqW5OdEXzCyzzcCvdrI">
</script>

<script>
    function initialize() {

        let map = null;

        <% for(var i=0; i<docs.length; i++) {%>

            if (isNaN(<%= docs[i].latitude %>) && isNaN(<%= docs[i].latitude %>)) {  //latitude longitude are numbers
                let latLng = {lat: <%= docs[0].latitude %>, lng: <%= docs[0].longitude %>};
                if (map == null) {
                    var mapProp = {
                        center: latLng,
                        zoom: 15,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    map=new google.maps.Map(document.getElementById("googleMap"), mapProp);
                }

                new google.maps.Circle({
                    map: map,
                    center: latLng,
                    radius: 2
                });
            }

        <% } %>

    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script>

<!-- <ul>
    <% for(var i=0; i<docs.length; i++) {%>
    <li><%= docs[i].latitude %>,<%= docs[i].longitude %></li>
    <% } %>
</ul> -->